# Тестирование доступности (a11y)

## Обзор

В нашем проекте мы уделяем особое внимание доступности (accessibility, сокращенно a11y). Доступность гарантирует, что наше приложение может использоваться всеми людьми, включая тех, кто имеет ограниченные возможности. В этом руководстве описываются инструменты, процессы и рекомендации для тестирования и поддержания хорошего уровня доступности.

## Стандарты доступности

Мы стремимся соответствовать следующим стандартам:

- **WCAG 2.1 AA**: Минимальный уровень соответствия для всего приложения.
- **WCAG 2.1 AAA**: Для критически важных компонентов (навигация, формы, основной контент).

## Инструменты тестирования

### Автоматизированные тесты

1. **axe-core/playwright**: Основной инструмент для автоматизированного тестирования доступности.

   - Расположение тестов: `e2e/color-contrast.spec.ts`

2. **jest-axe**: Для модульного тестирования компонентов.
   - Используется в тестах компонентов в каталогах `__tests__`

### Ручное тестирование

1. **Клавиатурная навигация**: Проверка работы приложения без использования мыши.

   - Убедитесь, что порядок табуляции логичен и последователен.
   - Все интерактивные элементы должны быть доступны с клавиатуры.

2. **Скринридеры**:

   - NVDA (Windows): https://www.nvaccess.org/
   - VoiceOver (macOS): Встроен в систему
   - Для базового тестирования используйте ChromeVox: https://chrome.google.com/webstore/detail/chromevox/

3. **Режимы высокой контрастности**:
   - Windows: Встроенный режим высокой контрастности
   - Используйте браузерные эмуляторы: `(prefers-contrast: more)`

## Процесс тестирования

### При разработке нового компонента

1. **Доступность с клавиатуры**:

   - Убедитесь, что все интерактивные элементы доступны с помощью клавиатуры.
   - Проверьте видимый фокус на всех интерактивных элементах.

2. **Семантическая разметка**:

   - Используйте правильные HTML элементы (`button` для кнопок, `a` для ссылок и т.д.).
   - Добавьте соответствующие ARIA-атрибуты, где это необходимо.

3. **Альтернативный текст**:

   - Все нетекстовые элементы (изображения, иконки) должны иметь альтернативный текст.
   - Декоративные элементы должны иметь пустой `alt=""`.

4. **Цветовой контраст**:
   - Минимальный контраст для текста: 4.5:1 (AA) или 7:1 (AAA).
   - Используйте инструменты для проверки контраста.

### Автоматическое тестирование

1. **Запуск тестов**:

   ```bash
   # Запуск всех тестов доступности
   npm run test:a11y

   # Запуск тестов контраста
   npm run test:contrast
   ```

2. **Интерпретация результатов**:
   - Исправьте все критические ошибки.
   - Рассмотрите предупреждения и решите, требуют ли они исправления.

## Типичные проблемы и решения

### Контраст текста

**Проблема**: Недостаточный контраст между текстом и фоном.

**Решение**:

- Используйте переменные цвета, которые соответствуют требованиям контраста.
- Для проверки используйте: `npm run test:contrast`.

### Клавиатурная доступность

**Проблема**: Элементы не фокусируются или фокус не виден.

**Решение**:

- Убедитесь, что интерактивные элементы имеют `tabindex="0"`.
- Не используйте отрицательный `tabindex` для интерактивных элементов.
- Не отключайте стандартный контур фокуса без замены.

### ARIA и семантика

**Проблема**: Неправильное использование ARIA или отсутствие семантики.

**Решение**:

- Используйте встроенные семантические элементы HTML5.
- Следуйте [ARIA Authoring Practices Guide](https://www.w3.org/WAI/ARIA/apg/).

## Ресурсы

- [Web Content Accessibility Guidelines (WCAG) 2.1](https://www.w3.org/TR/WCAG21/)
- [ARIA Authoring Practices Guide](https://www.w3.org/WAI/ARIA/apg/)
- [Inclusive Components](https://inclusive-components.design/)
- [A11y Project Checklist](https://www.a11yproject.com/checklist/)

## Контрольный список

Используйте этот контрольный список при разработке новых компонентов:

- [ ] Все интерактивные элементы доступны с клавиатуры
- [ ] Для всех изображений добавлен альтернативный текст
- [ ] Контраст текста соответствует WCAG AA/AAA
- [ ] Семантические HTML элементы используются правильно
- [ ] ARIA-атрибуты добавлены, где необходимо
- [ ] Компонент тестируется с помощью axe
- [ ] Поддерживается режим высокого контраста
- [ ] Поддерживается режим уменьшенной анимации
