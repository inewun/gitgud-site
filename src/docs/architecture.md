# Архитектура проекта

## Структура проекта (Feature-Sliced Design)

Проект использует методологию Feature-Sliced Design для организации кода. Это обеспечивает лучшую изоляцию компонентов, улучшает повторное использование и делает структуру понятной.

### Уровни архитектуры

1. **Shared** (`src/shared/`)

   - Переиспользуемые сущности, независимые от бизнес-логики
   - Директории:
     - `ui/` - базовые UI компоненты
     - `lib/` - утилиты и хелперы
     - `hooks/` - React-хуки общего назначения
     - `types/` - типы TypeScript
     - `providers/` - контекст-провайдеры React

2. **Entities** (`src/entities/`)

   - Бизнес-сущности (например, User, Product, Order)
   - Не содержат бизнес-логики, только представление и типы данных

3. **Features** (`src/features/`)

   - Функциональность пользовательских сценариев
   - Директории по бизнес-функциям (anonymize, auth, etc.)
   - Могут использовать сущности и shared

4. **Widgets** (`src/widgets/`)

   - Композиционные компоненты, содержащие features и entities
   - Представляют собой крупные блоки интерфейса

5. **Pages** (`src/app/`)
   - Страницы приложения (роуты)
   - Композиция из виджетов, фичей и сущностей

### Организация UI-компонентов

UI компоненты организованы внутри каждого слоя по принципу атомарного дизайна:

1. **Атомы** (базовые компоненты)

   - Находятся в `src/shared/ui/`
   - Примеры: `Button`, `Input`, `Icon`, `Typography`

2. **Молекулы** (композиции атомов)

   - Композиционные компоненты, состоящие из атомов
   - Например: `FormField`, `SearchInput`

3. **Организмы** (сложные компоненты интерфейса)
   - Композиции молекул и атомов
   - Например: `DataTable`, `Form`

### Правила именования и организации

1. **Именование компонентов:**

   - PascalCase для компонентов (например, `Button.tsx`)
   - camelCase для утилит и хуков (например, `useLocalStorage.ts`)

2. **Структура файлов:**

   ```
   src/
     ├── shared/
     │   ├── ui/
     │   │   ├── button/
     │   │   │   ├── Button.tsx
     │   │   │   ├── Button.stories.tsx
     │   │   │   ├── __tests__/Button.test.tsx
     │   │   │   └── index.ts
     │   ├── lib/
     │   │   ├── utils.ts
     │   │   └── hooks/
     │   │       └── useDebounce.ts
     ├── entities/
     │   ├── user/
     │   │   ├── model/
     │   │   ├── ui/
     │   │   └── lib/
     ├── features/
     │   ├── anonymize/
     │   │   ├── model/
     │   │   ├── ui/
     │   │   └── lib/
     └── app/
         ├── page.tsx
         ├── layout.tsx
         └── [feature]/
             └── page.tsx
   ```

3. **Публичное API:**
   - Каждый модуль должен экспортировать свой публичный API через `index.ts`
   - Внутренние компоненты и утилиты не должны экспортироваться

## Принципы разработки

1. **Инкапсуляция и изоляция**

   - Модули должны быть максимально изолированными
   - Изменения в одном модуле не должны затрагивать другие

2. **Слабая связность**

   - Избегать прямых зависимостей между модулями одного уровня
   - Зависимости должны идти "снизу вверх" (shared → entities → features → widgets → pages)

3. **Переиспользование**

   - Общие компоненты должны размещаться в shared
   - Избегать дублирования функциональности

4. **Композиция**
   - Предпочтение композиции над наследованием
   - Использование паттерна render props и компонентов высшего порядка

## Стили

1. **Tailwind CSS** для стилизации компонентов

   - Использовать композицию классов для повторяющихся стилей
   - Общие стили находятся в `src/styles/compositions/`

2. **Дизайн-токены**
   - Цвета, шрифты, размеры определены в `tailwind.config.ts`
   - CSS-переменные в `src/styles/tokens.css`

## Тестирование

1. **Unit-тесты** с Jest и React Testing Library

   - Тесты размещаются рядом с тестируемым кодом в папке `__tests__`
   - Покрытие тестами должно быть не менее 85%

2. **Интеграционные тесты** с Playwright

   - Тесты размещаются в директории `e2e/`

3. **Доступность** с помощью axe и jest-axe
   - Проверки доступности интегрированы в тесты

## Документация

1. **Storybook** для документации компонентов

   - Каждый компонент в `shared/ui` должен иметь story

2. **JSDoc** для API-документации
   - Документация должна содержать описание, параметры и примеры
